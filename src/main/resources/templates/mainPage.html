<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Together - 소모임 서비스</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/mainPage.css}">
</head>
<body>

<div th:replace="~{/layout/header :: header}"></div>

<main>
    <section class="hero-section">
        <div class="container hero-content">
            <div class="text-column">
                <h1>같이 놀 사람? 여기 모여라!</h1>
                <p>
                    누구나 쉽게, 어디서든 가볍게. 같은 관심사만 있으면 지역은 상관없어요. 산책, 독서, 보드게임 등 마음 맞는 사람들과 자연스럽게 어울릴 수 있는 공간입니다.
                </p>
            </div>
            <div class="image-column">
                <img th:src="@{/images/banner.jpg}" alt="모임 일러스트" class="banner-image">
            </div>
        </div>
    </section>

    <section class="container">
        <h2 class="section-title">카테고리별 탐색</h2>
        <div class="category-grid">
            <a th:href="@{/categories(category='ALL')}" class="category-item">
                <img th:src="@{/images/category-all.png}" alt="전체" />
                <div class="category-caption">전체</div>
            </a>
            <a th:each="category : ${categories}"
               th:href="@{/categories(category=${category.name()})}"
               class="category-item">
                <img th:src="@{${category.imageUrl}}" th:alt="${category.koreanName} + ' 카테고리 이미지'" />
                <div class="category-caption" th:text="${category.koreanName}">카테고리명</div>
            </a>
        </div>
    </section>

    <section class="container slider-section">
        <h2 class="section-title">추천 카페</h2>
        <div class="slider-container">
            <button class="slider-button prev"><i class="fas fa-chevron-left"></i></button>
            <div class="slider-wrapper" id="recom-slider">
                <div class="slider-card" th:each="cafe : ${recomCafes}">
                    <a th:href="@{/cafe/{cafeId}(cafeId=${cafe.id})}" class="card-link">
                        <div class="card h-100">
                            <img th:src="@{${cafe.cafeThumbnail ?: '/images/default-cafe.png'}}"
                                 th:alt="${cafe.name} + ' 카페 이미지'" class="card-img-top">
                            <div class="card-body">
                                <h5 class="card-title" th:text="${cafe.name}">카페 이름</h5>
                                <p class="card-text text-muted small mb-0" th:text="${cafe.description}">카페 설명</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div th:if="${#lists.isEmpty(recomCafes)}" class="slider-card empty-card">
                    <p class="text-center text-muted">추천 카페가 아직 없습니다.</p>
                </div>
            </div>
            <button class="slider-button next"><i class="fas fa-chevron-right"></i></button>
        </div>
    </section>

    <section class="container slider-section">
        <h2 class="section-title">인기 중고거래</h2>
        <div class="slider-container">
            <button class="slider-button prev trade-prev"><i class="fas fa-chevron-left"></i></button>
            <div class="slider-wrapper" id="trade-slider">
                <div class="slider-card" th:each="trade : ${recomTrades}">
                    <a th:href="@{/trade/read/{id}(id=${trade.id})}" class="card-link">
                        <div class="card h-100">
                            <img th:src="@{${trade.thumbnail ?: '/images/default-trade.png'}}"
                                 th:alt="${trade.title} + ' 상품 이미지'" class="card-img-top">
                            <div class="card-body">
                                <h5 class="card-title" th:text="${trade.title}">거래 제목</h5>
                                <p class="card-text text-success small mb-0 fw-bold">
                                    <span th:text="${#numbers.formatDecimal(trade.price, 0, 'COMMA', 0, 'POINT')}">0</span>원
                                </p>
                            </div>
                        </div>
                    </a>
                </div>
                <div th:if="${#lists.isEmpty(recomTrades)}" class="slider-card empty-card">
                    <p class="text-center text-muted" style="min-width: 100%;">인기 중고거래 상품이 아직 없습니다.</p>
                </div>
            </div>
            <button class="slider-button next trade-next"><i class="fas fa-chevron-right"></i></button>
        </div>
    </section>
</main>

<div th:replace="~{/layout/footer :: footer}"></div>

<script th:src="@{/js/mainPage.js}"></script>

</body>
</html>