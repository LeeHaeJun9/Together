<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>카페 개설 신청 목록</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/applicationList.css}">
    <style>
        .table-container table {
            width: 100%;       /* 테이블 전체 너비 */
            table-layout: fixed; /* 컬럼 너비 고정 */
            margin: 0 auto;    /* 중앙 정렬 */
        }

        .table-container th,
        .table-container td {
            text-align: center;
            overflow: hidden;  /* 글자가 넘칠 때 숨김 */
            text-overflow: ellipsis; /* ... 표시 */
            white-space: nowrap; /* 한 줄로 표시 */
        }

        /* 컬럼별 너비 지정 */
        .table-container th:nth-child(1),
        .table-container td:nth-child(1) { width: 5%; }   /* ID */
        .table-container th:nth-child(2),
        .table-container td:nth-child(2) { width: 20%; }  /* 카페 이름 */
        .table-container th:nth-child(3),
        .table-container td:nth-child(3) { width: 35%; }  /* 설명 */
        .table-container th:nth-child(4),
        .table-container td:nth-child(4) { width: 15%; }  /* 카테고리 */
        .table-container th:nth-child(5),
        .table-container td:nth-child(5) { width: 15%; }  /* 신청일 */
        .table-container th:nth-child(6),
        .table-container td:nth-child(6) { width: 10%; }  /* 상세 보기 버튼 */
    </style>
</head>
<body>

<div th:replace="~{layout/header :: header}"></div>

<main class="container py-4">
    <div th:if="${message}" class="alert alert-success alert-dismissible fade show" role="alert">
        <span th:text="${message}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
        <span th:text="${error}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <div class="d-flex align-items-center justify-content-between mb-3">
        <h3 class="mb-0">카페 신청 목록</h3>
    </div>
    <div th:if="${#lists.isEmpty(applications)}" class="text-center text-muted py-5">
        <p class="mb-0">현재 검토 대기 중인 신청이 없습니다.</p>
    </div>

    <div class="card">
        <div class="card-body p-0">
            <div class="table-responsive table-container" th:unless="${#lists.isEmpty(applications)}">
                <table class="table table-hover mb-0 align-middle">
                    <thead class="table-light">
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">카페 이름</th>
                        <th scope="col">설명</th>
                        <th scope="col">카테고리</th>
                        <th scope="col">신청일</th>
                        <th scope="col">상세 보기</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="app : ${applications}">
                        <td th:text="${app.applicationId}"></td>
                        <td th:text="${app.name}" class="text-decoration-none"></td>
                        <td th:text="${app.description}"></td>
                        <td th:text="${app.category}"></td>
                        <td th:text="${#temporals.format(app.regDate, 'yyyy-MM-dd HH:mm')}"></td>
                        <td>
                            <a th:href="@{'/cafe/admin/applications/' + ${app.applicationId}}" class="btn btn-sm btn-outline-primary">
                                <i class="fas fa-info-circle me-1"></i>상세 보기
                            </a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

<!--    <div class="table-container" th:unless="${#lists.isEmpty(applications)}" >-->
<!--        <table class="table table-hover mt-1 mb-0">-->
<!--            <thead class="table-custom-header text-center">-->
<!--            <tr>-->
<!--                <th scope="col">ID</th>-->
<!--                <th scope="col">카페 이름</th>-->
<!--                <th scope="col">설명</th>-->
<!--                <th scope="col">카테고리</th>-->
<!--                <th scope="col">신청일</th>-->
<!--                <th scope="col">상세 보기</th>-->
<!--            </tr>-->
<!--            </thead>-->
<!--            <tbody class="text-center">-->
<!--            <tr th:each="app : ${applications}">-->
<!--                <td th:text="${app.applicationId}"></td>-->
<!--                <td th:text="${app.name}" class="text-decoration-none"></td>-->
<!--                <td th:text="${app.description}"></td>-->
<!--                <td th:text="${app.category}"></td>-->
<!--                <td th:text="${#temporals.format(app.regDate, 'yyyy-MM-dd HH:mm')}"></td>-->
<!--                <td>-->
<!--                    <a th:href="@{'/cafe/admin/applications/' + ${app.applicationId}}" class="btn btn-sm btn-outline-primary">-->
<!--                        <i class="fas fa-info-circle me-1"></i>상세 보기-->
<!--                    </a>-->
<!--                </td>-->
<!--            </tr>-->
<!--            </tbody>-->
<!--        </table>-->
<!--    </div>-->
</main>
<div th:replace="~{layout/footer :: footer}"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>