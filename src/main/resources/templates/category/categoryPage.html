<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>카테고리 - Together</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/categoryPage.css}">
</head>
<body>

<!-- 헤더 -->
<div th:replace="~{/layout/header :: header}"></div>

<main class="container my-4">

  <h2 class="mb-4" th:text="${category} + ' 카테고리 전체 보기'">카테고리 전체 보기</h2>

  <!-- 모임 섹션 -->
  <section class="mb-5">
    <h3>모임 (공개)</h3>
    <div th:if="${#lists.isEmpty(meetings)}" class="text-muted">
      공개된 모임이 없습니다.
    </div>
    <div class="list-group" th:unless="${#lists.isEmpty(meetings)}">
      <a th:each="meeting : ${meetings}"
         th:href="@{/meeting/{id}(id=${meeting.id})}"
         class="list-group-item list-group-item-action meeting-card">
        <strong th:text="${meeting.title}">모임 제목</strong>
        <span class="text-muted small" th:text="${#temporals.format(meeting.meetingDate, 'yyyy-MM-dd HH:mm')}">날짜</span>
        <p class="mb-0" th:text="${meeting.content}">모임 내용</p>
      </a>
    </div>
  </section>

  <!-- 카페 섹션 -->
  <section class="mb-5">
    <h3>카페</h3>
    <div th:if="${#lists.isEmpty(cafes)}" class="text-muted">
      해당 카테고리 카페가 없습니다.
    </div>
    <div class="row row-cols-1 row-cols-md-4 g-3" th:unless="${#lists.isEmpty(cafes)}">
      <div class="col" th:each="cafe : ${cafes}">
        <div class="card h-100 cafe-card">
          <img th:src="${cafe.cafeThumbnail ?: '/images/default-cafe.png'}" class="card-img-top" th:alt="${cafe.name}">
          <div class="card-body">
            <h5 class="card-title" th:text="${cafe.name}">카페 이름</h5>
            <p class="card-text" th:text="${cafe.description}">카페 설명</p>
            <p class="text-muted small">멤버 <span th:text="${cafe.memberCount}">0</span>명</p>
            <a th:href="@{/cafe/{id}(id=${cafe.id})}" class="btn btn-sm btn-success">카페 보기</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 중고거래 섹션 -->
  <section class="mb-5">
    <h3>중고거래</h3>
    <div th:if="${#lists.isEmpty(trades)}" class="text-muted">
      해당 카테고리 거래글이 없습니다.
    </div>
    <div class="row row-cols-1 row-cols-md-4 g-3" th:unless="${#lists.isEmpty(trades)}">
      <div class="col" th:each="trade : ${trades}">
        <div class="card h-100 trade-card">
          <img th:src="${trade.thumbnail ?: '/images/default-trade.png'}" class="card-img-top" th:alt="${trade.title}">
          <div class="card-body">
            <h5 class="card-title" th:text="${trade.title}">거래 제목</h5>
            <p class="card-text" th:text="${trade.description}">거래 설명</p>
            <p class="text-muted small">가격: <span th:text="${trade.price}">0</span>원</p>
            <p class="text-muted small">판매자: <span th:text="${trade.sellerNickname}">닉네임</span></p>
            <a th:href="@{/trade/{id}(id=${trade.id})}" class="btn btn-sm btn-primary">자세히 보기</a>
          </div>
        </div>
      </div>
    </div>
  </section>

</main>

<!-- 푸터 -->
<div th:replace="~{/layout/footer :: footer}"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
