<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/basic.html}">
<head>
    <meta charset="UTF-8" />
    <title>Trade Read</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous" />

    <link href="/static/css/style.css" rel="stylesheet">

</head>
<body>

<!-- Ìó§Îçî -->
<header id="header">
    <!-- Î°úÍ≥† -->
    <div id="logo">
        <img id="logo_img" src="#">
    </div>

    <!-- Í≤ÄÏÉâ Î∞î -->
    <form class="search_bar" action="#" method="get">
        <div class="input_box">
            <i class="fa-solid i1 fa-magnifying-glass" aria-hidden="true"></i>
            <input class="search_text" type="text" name="q" placeholder="Í≤ÄÏÉâÏñ¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" />
        </div>
    </form>

    <!-- Î°úÍ∑∏Ïù∏ -->
    <div class="login">
        <a href="#"><span>Î°úÍ∑∏Ïù∏</span></a>
    </div>

    <!-- ÏÉÅÎã® Î¶¨Ïä§Ìä∏ -->
    <nav class="list_bar" aria-label="ÏÉÅÎã® Î©îÎâ¥">
        <ul class="t_list">
            <!-- Ïπ¥ÌéòÎûë Î™®ÏûÑÎ∂ÄÎ∂Ñ ÏûëÏÑ±ÌïòÍ∏∞ -->
            <li><a href="#"  class="menu-link" id="menu-cafe"><span>Ïπ¥Ìéò Î™©Î°ù</span></a></li>
            <li><a href="#" class="menu-link" id="menu-group"><span>Î™®ÏûÑ Î™©Î°ù</span></a></li>
            <li><a href="/trade/list" class="menu-link" id="menu-trade"><span>Ï§ëÍ≥†Í±∞Îûò</span></a></li>
        </ul>
    </nav>
</header>

<section layout:fragment="content">
    <div id="carouselExampleIndicators" class="carousel slide">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="..." class="d-block w-100" alt="...">
            </div>
            <div class="carousel-item">
                <img src="..." class="d-block w-100" alt="...">
            </div>
            <div class="carousel-item">
                <img src="..." class="d-block w-100" alt="...">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>

        <div class="carousel-inner">
            <!-- Ïù¥ÎØ∏ÏßÄÍ∞Ä ÏûàÏùÑ Îïå -->
            <div th:if="${item.images != null && !#lists.isEmpty(item.images)}"
                 th:each="img, stat : ${item.images}"
                 th:classappend="${stat.index == 0} ? ' active' : ''"
                 class="carousel-item">
                <img th:src="${img}" class="d-block w-100" alt="photo"/>
            </div>

            <!-- Ïù¥ÎØ∏ÏßÄÍ∞Ä ÏóÜÏùÑ Îïå ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî -->
            <div th:if="${item.images == null || #lists.isEmpty(item.images)}" class="carousel-item active">
                <div class="ratio ratio-16x9 d-flex align-items-center justify-content-center placeholder-box">
                    <div class="display-6 text-muted">ÏÇ¨ÏßÑ</div>
                </div>
            </div>
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#tradeCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#tradeCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>

    <!-- ===== ÏûëÏÑ±Ïûê(ÎãâÎÑ§ÏûÑ/Ïù¥Î¶Ñ)Îßå ÌëúÏãú ===== -->
    <div class="bg-light rounded-3 p-3 d-flex align-items-center mb-3">
        <strong th:text="${
              item.sellerName != null ? item.sellerName
              : (item.sellerNickname != null ? item.sellerNickname : 'ÎãâÎÑ§ÏûÑ')
            }">ÎãâÎÑ§ÏûÑ</strong>
    </div>

    <!-- ===== Ï†úÎ™© ===== -->
    <div class="mb-2">
        <div class="form-control py-3">
            <strong th:text="${item.title != null ? item.title : 'Ï†úÎ™©'}">Ï†úÎ™©</strong>
        </div>
    </div>

    <!-- ===== Í∞ÄÍ≤© ===== -->
    <div class="mb-3">
        <div class="form-control py-3">
            <span th:text="${item.price != null ? #numbers.formatInteger(item.price,0,'COMMA') + 'Ïõê' : 'Í∞ÄÍ≤©'}">Í∞ÄÍ≤©</span>
        </div>
    </div>

    <!-- ===== ÎÇ¥Ïö© ===== -->
    <div class="mb-4">
        <div class="form-control py-4" style="min-height:160px; white-space:pre-line;"
             th:text="${item.content != null ? item.content : 'ÎÇ¥Ïö©'}">ÎÇ¥Ïö©</div>
    </div>

    <!-- ===== Ï±ÑÌåÖ ÏûÖÎ†•Ï∞Ω (ÌïòÎã® Í≥†Ï†ï) ===== -->
    <div class="chat-dock">
        <form class="container py-2" th:action="@{/trade/chat}" method="post">
            <input type="hidden" name="tradeId" th:value="${item.id}" />
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <div class="input-group">
                <span class="input-group-text">üí¨</span>
                <input type="text" name="message" class="form-control" placeholder="Ï±ÑÌåÖ ÏûÖÎ†•Ï∞Ω" required />
                <button class="btn btn-primary" type="submit">Î≥¥ÎÇ¥Í∏∞</button>
            </div>
        </form>
    </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>
</html>
